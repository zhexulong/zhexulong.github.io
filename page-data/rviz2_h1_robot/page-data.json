{"componentChunkName":"component---src-templates-blog-post-js","path":"/rviz2_h1_robot/","result":{"data":{"site":{"siteMetadata":{"title":"且听龙吟"}},"markdownRemark":{"id":"7b5757a4-295f-5005-ac49-376e23efbb52","excerpt":"本文对应源码:仓库地址 摄像头采集 在windows中使用ffmpeg发送给wsl2,通过下面命令: 在wsl2中使用opencv接收,并显示: yolo v7得到关节数据并估计关节角 yolo v7进行pose-estimation的仓库:地址 找到keypoint landmark order…","html":"<p>本文对应源码:<a href=\"https://github.com/zhexulong/h1_rviz2\">仓库地址</a></p>\n<h2 id=\"摄像头采集\" style=\"position:relative;\">摄像头采集<a href=\"#%E6%91%84%E5%83%8F%E5%A4%B4%E9%87%87%E9%9B%86\" aria-label=\"摄像头采集 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>在windows中使用ffmpeg发送给wsl2,通过下面命令:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">ffmpeg <span class=\"token operator\">-</span>f dshow <span class=\"token operator\">-</span>i video=<span class=\"token string\">\"1080P USB Camera\"</span> <span class=\"token operator\">-</span>preset ultrafast <span class=\"token operator\">-</span>tune zerolatency <span class=\"token operator\">-</span>vcodec libx264 <span class=\"token operator\">-</span>f mpegts udp:&lt;ip>:&lt;port></code></pre></div>\n<p>在wsl2中使用opencv接收,并显示:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> cv2\r\ncap <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoCapture<span class=\"token punctuation\">(</span><span class=\"token string\">'udp://&lt;ip>:&lt;port>'</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>cap<span class=\"token punctuation\">.</span>isOpened<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    ret<span class=\"token punctuation\">,</span> frame <span class=\"token operator\">=</span> cap<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">if</span> ret<span class=\"token punctuation\">:</span>\r\n        <span class=\"token operator\">//</span> do something</code></pre></div>\n<h2 id=\"yolo-v7得到关节数据并估计关节角\" style=\"position:relative;\">yolo v7得到关节数据并估计关节角<a href=\"#yolo-v7%E5%BE%97%E5%88%B0%E5%85%B3%E8%8A%82%E6%95%B0%E6%8D%AE%E5%B9%B6%E4%BC%B0%E8%AE%A1%E5%85%B3%E8%8A%82%E8%A7%92\" aria-label=\"yolo v7得到关节数据并估计关节角 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>yolo v7进行pose-estimation的仓库:<a href=\"https://github.com/RizwanMunawar/yolov7-pose-estimation\">地址</a></p>\n<p>找到keypoint landmark order,据此可得我们所需的左胳膊需要(5,7,9)三个关节点来计算关节角</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f5c749f4d81efa67d529a8aa34f57fc/940c5/landmark.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.74683544303798%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAz0lEQVR42r1T0W7DIAy0jQ12aBNwQ5JWlSZN+/9vHO37ttKHWZaQBac7TmeAHwuf/c/FKZ33u9WNowyDkTDkcxBlEsQR8RjCbf5YqRaoX9fD3QbAsSz3+TNCF0xt0+OwnF8Tj4J2dWc3ehB6TZ25tfy4+lP+6XYKmRXU46WPrRkzvfZrBGLqpwBvaevjsU8iPGz4HvdueWtKNBgVQVm5qbF7GqadaJqxJIP1kt8BL1QTwWppOOHd8WKuCAsSjKLp+X5CrCHAe8sVAYrqL+H4Bmu1B7SglP0DAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"landmark.png\"\n        title=\"\"\n        src=\"/static/0f5c749f4d81efa67d529a8aa34f57fc/f058b/landmark.png\"\n        srcset=\"/static/0f5c749f4d81efa67d529a8aa34f57fc/c26ae/landmark.png 158w,\n/static/0f5c749f4d81efa67d529a8aa34f57fc/6bdcf/landmark.png 315w,\n/static/0f5c749f4d81efa67d529a8aa34f57fc/f058b/landmark.png 630w,\n/static/0f5c749f4d81efa67d529a8aa34f57fc/940c5/landmark.png 772w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">angle_between_points</span><span class=\"token punctuation\">(</span> p0<span class=\"token punctuation\">,</span> p1<span class=\"token punctuation\">,</span> p2 <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    a <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>p0<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>p0<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span>\r\n    b <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>p2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>p2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span>\r\n    c <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>p2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>p0<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>p2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span>p0<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span>\r\n    <span class=\"token keyword\">if</span> a <span class=\"token operator\">*</span> b <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1.0</span> \r\n    \r\n    <span class=\"token keyword\">return</span>  math<span class=\"token punctuation\">.</span>acos<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>b<span class=\"token operator\">-</span>c<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> math<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token operator\">*</span>a<span class=\"token operator\">*</span>b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_angle_point</span><span class=\"token punctuation\">(</span>human<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">,</span> steps<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    pnts <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n \r\n    <span class=\"token keyword\">if</span> pos <span class=\"token operator\">==</span> <span class=\"token string\">'left_elbow'</span><span class=\"token punctuation\">:</span>\r\n        pos_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span>\r\n    \r\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        pnts<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span> human<span class=\"token punctuation\">[</span> pos_list<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>steps<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span> human<span class=\"token punctuation\">[</span> pos_list<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>steps<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">return</span> pnts\r\n\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">angle_left_elbow</span><span class=\"token punctuation\">(</span>human<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    pnts <span class=\"token operator\">=</span> get_angle_point<span class=\"token punctuation\">(</span>human<span class=\"token punctuation\">,</span> <span class=\"token string\">'left_elbow'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>pnts<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'component incomplete'</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">return</span>\r\n \r\n    angle <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\r\n    <span class=\"token keyword\">if</span> pnts <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span>\r\n        angle <span class=\"token operator\">=</span> angle_between_points<span class=\"token punctuation\">(</span>pnts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> pnts<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> pnts<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'left elbow angle:%f'</span><span class=\"token operator\">%</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    send_angle_to_local<span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">return</span> angle\r\n</code></pre></div>\n<h2 id=\"ros2节点操控宇树h1机器人\" style=\"position:relative;\">ros2节点操控宇树h1机器人<a href=\"#ros2%E8%8A%82%E7%82%B9%E6%93%8D%E6%8E%A7%E5%AE%87%E6%A0%91h1%E6%9C%BA%E5%99%A8%E4%BA%BA\" aria-label=\"ros2节点操控宇树h1机器人 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python3</span>\r\n<span class=\"token keyword\">import</span> rclpy\r\n<span class=\"token keyword\">from</span> rclpy<span class=\"token punctuation\">.</span>node <span class=\"token keyword\">import</span> Node\r\n<span class=\"token keyword\">import</span> threading\r\n<span class=\"token keyword\">from</span> sensor_msgs<span class=\"token punctuation\">.</span>msg <span class=\"token keyword\">import</span> JointState\r\n<span class=\"token keyword\">from</span> math <span class=\"token keyword\">import</span> pi\r\n<span class=\"token keyword\">import</span> socket\r\n\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RotateWheelNode</span><span class=\"token punctuation\">(</span>Node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>get_logger<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"node </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\"> init..\"</span></span><span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>pub_joint_state_ <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>create_publisher<span class=\"token punctuation\">(</span>JointState<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/joint_states\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>_init_joint_states<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>pub_rate <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>create_rate<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>thread_ <span class=\"token operator\">=</span> threading<span class=\"token punctuation\">.</span>Thread<span class=\"token punctuation\">(</span>target<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>_thread_pub<span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>thread_<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">_init_joint_states</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        self<span class=\"token punctuation\">.</span>joint_states_ <span class=\"token operator\">=</span> JointState<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n            <span class=\"token string\">\"left_hip_yaw_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_hip_roll_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_hip_pitch_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_knee_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_ankle_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_hip_yaw_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_hip_roll_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_hip_pitch_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_knee_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_ankle_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"torso_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_shoulder_pitch_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_shoulder_roll_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_shoulder_yaw_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_elbow_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"left_hand_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_thumb_proximal_yaw_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_thumb_proximal_pitch_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_thumb_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_thumb_distal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_index_proximal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_index_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_middle_proximal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_middle_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_ring_proximal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_ring_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_pinky_proximal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"L_pinky_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_shoulder_pitch_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_shoulder_roll_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_shoulder_yaw_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_elbow_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"right_hand_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_thumb_proximal_yaw_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_thumb_proximal_pitch_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_thumb_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_thumb_distal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_index_proximal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_index_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_middle_proximal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_middle_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_ring_proximal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_ring_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_pinky_proximal_joint\"</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token string\">\"R_pinky_intermediate_joint\"</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">]</span>\r\n\r\n        self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>header<span class=\"token punctuation\">.</span>stamp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_clock<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to_msg<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>header<span class=\"token punctuation\">.</span>frame_id <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n        self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>velocity <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n        self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>effort <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_angle</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        sock <span class=\"token operator\">=</span> socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_DGRAM<span class=\"token punctuation\">)</span>\r\n        server_address <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12345</span><span class=\"token punctuation\">)</span>\r\n        sock<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span>server_address<span class=\"token punctuation\">)</span>\r\n\r\n        data<span class=\"token punctuation\">,</span> address <span class=\"token operator\">=</span> sock<span class=\"token punctuation\">.</span>recvfrom<span class=\"token punctuation\">(</span><span class=\"token number\">4096</span><span class=\"token punctuation\">)</span>\r\n        angle <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n        self<span class=\"token punctuation\">.</span>get_logger<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span>\r\n            <span class=\"token string-interpolation\"><span class=\"token string\">f\"received </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\"> from </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>address<span class=\"token punctuation\">}</span></span><span class=\"token string\">, angle: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>angle<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span>\r\n        <span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">return</span> angle\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">_thread_pub</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">while</span> rclpy<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            index <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token string\">\"left_elbow_joint\"</span><span class=\"token punctuation\">)</span>\r\n            self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_angle<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> pi <span class=\"token operator\">/</span> <span class=\"token number\">2</span> \r\n            <span class=\"token comment\"># self.joint_states_.position[0] += pi</span>\r\n            self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>header<span class=\"token punctuation\">.</span>stamp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_clock<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to_msg<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n            self<span class=\"token punctuation\">.</span>pub_joint_state_<span class=\"token punctuation\">.</span>publish<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">)</span>\r\n            self<span class=\"token punctuation\">.</span>get_logger<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"publishing </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>joint_states_<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\r\n            self<span class=\"token punctuation\">.</span>pub_rate<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span>args<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    rclpy<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>args<span class=\"token operator\">=</span>args<span class=\"token punctuation\">)</span>\r\n    node <span class=\"token operator\">=</span> RotateWheelNode<span class=\"token punctuation\">(</span><span class=\"token string\">\"move_h1_joints\"</span><span class=\"token punctuation\">)</span>\r\n    rclpy<span class=\"token punctuation\">.</span>spin<span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span>\r\n    rclpy<span class=\"token punctuation\">.</span>shutdown<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>注意,由于h1机器人的肘部关节角是相对于水平方向的,所以需要减去pi/2</p>\n<h2 id=\"rviz2仿真结果\" style=\"position:relative;\">rviz2仿真结果<a href=\"#rviz2%E4%BB%BF%E7%9C%9F%E7%BB%93%E6%9E%9C\" aria-label=\"rviz2仿真结果 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5bf7c647fe3e4ea027e3ac90c80872c8/e35ec/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.15189873417721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACRklEQVR42m2SS27aUBiFvQ4GeUBARUGEgCpQ2AJDBMqMORKJmnQTLAAESCyCBXRSVU2gA0riuH4Sgg02NgbMyzzdE1yiqMoZ/Fzs+93z+9yfqFZrgiA8PpI8x4rtliSKiqLIcldRe6IkSh1JVmSl2+12JFXrKz0VS1VVZVkW223ix8/7R5LkeIFmaF4Qhvogm83GYrHLy8tEMpFMJhOJ1xqPx1OpVL1ebzQaDw8PFEU1eZ7gOLYrtSfGaDo21suFZVnpdNrhcJyenn7ay+v1ejyes7OzZrMpSdLz87OmaavVivhWZ+4YsdHWOW321B0PFtbX2xsA4XD48zuFQqFoNNpqtdA2YHzaer0mvv9mqn9ajZbKq2NKNgamdXvzxe1220AwGAzthMXFxQWw5XI5mUz6/f58PieQ09LEYm4M9fVqibavr68BBwIBn88H5vz8HNXv90ciEThjw2azsXYiSJrt9EfT2dw0F/ZTGwZwcnLyBuMswHC24e12+wpzSIzjR6PR25FXV1culwtWR0dHgb2Q1nv4nzPLMMhgOByapokMbGekDf7w8BCY7fwxLAhNRGcYBq5e13UbBgnA6XTC33bGAvn/D+O60Tl4ZDabzey28bUAcL2wtc0/hl9eXqZ7oXM8ymQyBwcH2H18fIxR8e2Eg9CLnTbGw86MqNV+CXuxLIvXlUoll8uVSqV8Pl8sFguFAir+lstlkiSxh9qJpp6Iu7t7DB1IVLzAr6b1MfdIUdlJFMVer4dEkUin08F4omIzQ9N/AWE2KyKp5AikAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"\"\n        src=\"/static/5bf7c647fe3e4ea027e3ac90c80872c8/f058b/img.png\"\n        srcset=\"/static/5bf7c647fe3e4ea027e3ac90c80872c8/c26ae/img.png 158w,\n/static/5bf7c647fe3e4ea027e3ac90c80872c8/6bdcf/img.png 315w,\n/static/5bf7c647fe3e4ea027e3ac90c80872c8/f058b/img.png 630w,\n/static/5bf7c647fe3e4ea027e3ac90c80872c8/e35ec/img.png 861w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/24522790d81286886228690e28905848/77800/img_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.88607594936708%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSUlEQVR42l2T7U7acBTGexd8MAESmQRN5G3irRC+OW/AhRBbqHfBJXgTW0z2aRkuvOkQgX+FllIpL2sLpa3aFvasHc74QJoDPb/znPPvKXV7ezuZTHhemExkTVMURX2yLNdx3LVrWuZqtXLww7adlxfHdVcrY7lc6rququpoNKK+Xn2r1mqNZrN5c9NqtUZD8fLy8vPZWemCpRm6VCoxRXwY+vycZdlarY6c+/v7TqfTJ4TiOCKJwnKhKb9nlqFvNpt8Ph8IBGKx2Iet9vb2cI1EIpVKZTgcttttQRBgTn3/1b3pS+RRkTRrqFrmesOyJWQfHx9/3Oro6O83lUphxvl8PhgMcHUch/pS7V41H34QuSXrPwVVNjcXbAk+mUwmnU4DSHtCiWQy2Wg0DMMAOR6PEVAPHPds6E+WudQU++UZbTMMgw6BHR4epjz5VRKJBGAkuK679kS1Oz1laZiWtTIM23Fxj6ZpH0bzcAOT9IRa9XodCWh444nqEq7XFxa6jkoo6cO7u7twC4fDryQUj8ffw1yvNxJFTdNcTz4cDAaj0WgoFAKQ2Aqx3/Z/uEfIdDrFc8d+YAHwV7FYhOf+/j5gf+xX5/cwIRzP87PZDMsEfx/GaeN4Dw4OUm8Ec79t27b/HRjHcXBWVBVHb1kW7hUKhZ2dHZBwjr0RBnk/893dHWBZlvHoJElaLBblcjmbzZ6enuZyuZOTk09bIa5Wq3gRBIHHhg15nqpcX3c9oQUsLSEEI6AWCqEcAlEUASieEGO9QCK5027/ASj7KIpz2aabAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.png\"\n        title=\"\"\n        src=\"/static/24522790d81286886228690e28905848/f058b/img_1.png\"\n        srcset=\"/static/24522790d81286886228690e28905848/c26ae/img_1.png 158w,\n/static/24522790d81286886228690e28905848/6bdcf/img_1.png 315w,\n/static/24522790d81286886228690e28905848/f058b/img_1.png 630w,\n/static/24522790d81286886228690e28905848/77800/img_1.png 855w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0649aea8e92310e7be0cbb8ca01c581c/33e10/img_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.15189873417721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZklEQVR42l1T7U7aYBh9r4F/amKIgBM0ERkY72UqP/jwh0sUJjeCuyAmLG5my0AQKKUUCqUt/USgIGWwQxsXtwN50rx9z3Oe83AglUqlWq0Wi0WKqrFsCx9ZlnVd1wxdURRVU1Vd0zVNU2TDGAqi1O12eZ7v2SAPP34WS6VavYEWDZoW+P7n29vT0w/JZDIWi8Xj8Vg8lkgk8IyTfOHrk416vV6r1YgiS0KPG+raZDRczF9Wq9Xl5cetra1AIPDuFXt7e6i7u7u5XE4QBJBRmRZLvjX4B6pb6WmsZlKDiTyeZ25ucP/4+Pj9vzg6Orq/v4cjhmFgi252yHeq96XU/NWW6cG4IozE55dP6bTH6w2FQrh9eHgYDAbxgIrnQqEwm82wAZCrTw2iyoOZOTEnk/FQX/5eAKlUCnNGIpH9/X0Ihl4Bfj6fhy/LslDbbZ5wvKAYI3M6xXe5Ws0tK5PJgHZycuL3+2EVHFgIh8NoBOW/ZIbpkr4o1RpN0zSXy6X9Yq2M3eAq6sbGhsfjcQwDb5VbDEckUeQ6ndHoGQPjaLGwQIYgxvZ6vSBvbm46zP/HbnXJYCCLkjQej1VVRcWL6+trn8+H9UDZ7Xa7XC70gjhOHPLCWsuIvETwizWbTYcJYJnpdBq3HZPoAv/YnzP5W2VNUQjCKEmSYRiwPZ/PcXp1dbW9vX1wcICcwLDPxs7ODrrc3d3Z1tbK0+mUcBwn2sAI/X4fvbLZ7Pn5+cXFBVKJeJ6dnaFGo1HEE9uGUrvd7tgg5XIZKaUoiqZp5A4VfDRC+tELTZ3uGA3ZwJ+BZVmQEbLHUukPYvAfql+riHEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"\"\n        src=\"/static/0649aea8e92310e7be0cbb8ca01c581c/f058b/img_2.png\"\n        srcset=\"/static/0649aea8e92310e7be0cbb8ca01c581c/c26ae/img_2.png 158w,\n/static/0649aea8e92310e7be0cbb8ca01c581c/6bdcf/img_2.png 315w,\n/static/0649aea8e92310e7be0cbb8ca01c581c/f058b/img_2.png 630w,\n/static/0649aea8e92310e7be0cbb8ca01c581c/33e10/img_2.png 844w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"反思\" style=\"position:relative;\">反思<a href=\"#%E5%8F%8D%E6%80%9D\" aria-label=\"反思 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>摄像头其实并不适合用来做关节角的估计,因为摄像头的数据是二维的,而关节角是三维的,所以在多数情况下,\r\n关节角的估计是不准确的,所以在实际应用中,还是应该使用传感器如IMU来获取关节角</p>","tableOfContents":"<ul>\n<li><a href=\"#%E6%91%84%E5%83%8F%E5%A4%B4%E9%87%87%E9%9B%86\">摄像头采集</a></li>\n<li><a href=\"#yolo-v7%E5%BE%97%E5%88%B0%E5%85%B3%E8%8A%82%E6%95%B0%E6%8D%AE%E5%B9%B6%E4%BC%B0%E8%AE%A1%E5%85%B3%E8%8A%82%E8%A7%92\">yolo v7得到关节数据并估计关节角</a></li>\n<li><a href=\"#ros2%E8%8A%82%E7%82%B9%E6%93%8D%E6%8E%A7%E5%AE%87%E6%A0%91h1%E6%9C%BA%E5%99%A8%E4%BA%BA\">ros2节点操控宇树h1机器人</a></li>\n<li><a href=\"#rviz2%E4%BB%BF%E7%9C%9F%E7%BB%93%E6%9E%9C\">rviz2仿真结果</a></li>\n<li><a href=\"#%E5%8F%8D%E6%80%9D\">反思</a></li>\n</ul>","headings":[{"value":"摄像头采集","depth":2},{"value":"yolo v7得到关节数据并估计关节角","depth":2},{"value":"ros2节点操控宇树h1机器人","depth":2},{"value":"rviz2仿真结果","depth":2},{"value":"反思","depth":2}],"frontmatter":{"title":"在rviz2中仿真并操控h1机器人","date":"September 17, 2024","description":"通过摄像头的数据,经过yolo v7得到关节点,进而估计关节角,将关节角通过ros2中编写的joint_state_publisher节点操控宇树h1机器人,并在rviz2中进行仿真显示"}},"previous":{"fields":{"slug":"/zynq-prediction/"},"frontmatter":{"title":"zynq经历与预测"}},"next":{"fields":{"slug":"/fpga-timing-concepts/"},"frontmatter":{"title":"fpga 时序概念"}}},"pageContext":{"id":"7b5757a4-295f-5005-ac49-376e23efbb52","previousPostId":"501971be-4f58-5ddb-80fc-ec726b863f64","nextPostId":"7c6bb613-82c2-5b7b-9ccf-c4dd76b37c1d"}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}