{"componentChunkName":"component---src-templates-blog-post-js","path":"/fpga-timing-concepts/","result":{"data":{"site":{"siteMetadata":{"title":"且听龙吟"}},"markdownRemark":{"id":"ec88022b-aa0e-57ec-9f78-981270c5ea0d","excerpt":"什么是建立时间和保持时间, 为什么需要考虑它们? D触发器 亚稳态问题 (复位中也需要) 时钟从哪里来? FPGA结构\r\n参考 时钟树 Local Clocks In general, avoid using local clocks建议来源 如何确认是否使用了local clocks: 通过report_clock…","html":"<h2 id=\"什么是建立时间和保持时间-为什么需要考虑它们\" style=\"position:relative;\">什么是建立时间和保持时间, 为什么需要考虑它们?<a href=\"#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BB%BA%E7%AB%8B%E6%97%B6%E9%97%B4%E5%92%8C%E4%BF%9D%E6%8C%81%E6%97%B6%E9%97%B4-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%AE%83%E4%BB%AC\" aria-label=\"什么是建立时间和保持时间 为什么需要考虑它们 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>D触发器</p>\n<p>亚稳态问题</p>\n<p>(复位中也需要)</p>\n<h2 id=\"时钟从哪里来\" style=\"position:relative;\">时钟从哪里来?<a href=\"#%E6%97%B6%E9%92%9F%E4%BB%8E%E5%93%AA%E9%87%8C%E6%9D%A5\" aria-label=\"时钟从哪里来 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>FPGA结构\r\n<a href=\"https://blog.csdn.net/u011327754/article/details/79897170\">参考</a></p>\n<h3 id=\"时钟树\" style=\"position:relative;\">时钟树<a href=\"#%E6%97%B6%E9%92%9F%E6%A0%91\" aria-label=\"时钟树 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<h4>Local Clocks</h4>\n<p>In general, avoid using local clocks<a href=\"https://docs.amd.com/r/en-US/ug949-vivado-design-methodology/Avoiding-Local-Clocks\">建议来源</a></p>\n<p>如何确认是否使用了local clocks: 通过report_clock_utilization命令</p>\n<h3 id=\"PLL和MCMM\" style=\"position:relative;\">PLL和MCMM<a href=\"#PLL%E5%92%8CMCMM\" aria-label=\"PLL和MCMM permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8fe223c2a9e5762e2369d62e75bc375c/4c42d/pll.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0ElEQVR42jWQXU+DYAyF+f/3/oH9AmM0msXELV74sRuVjW2AgODiQAZxH7KRJc9amjU5ad++pyendZg9wGIM21KyC78h/HiwzuGwk3oKRWhYzmC/gfZf6jnkAVQp1Jm8fWg2OMSvEL/AUw8GFxAMYdKn6weP8HYJ3j2MbwV3kIzAF44nnOwd3Bv4uBbeFUTPIqiR++ZI8yo1N80fHFurV1+G4lNci7u2kU0iKBPYVeIys3kJEyxjW6H+NkGFDqiADul/lxPrn8XKyLh6Kj0FcAK8bSwW+H/yIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pll简要结构\"\n        title=\"\"\n        src=\"/static/8fe223c2a9e5762e2369d62e75bc375c/f058b/pll.png\"\n        srcset=\"/static/8fe223c2a9e5762e2369d62e75bc375c/c26ae/pll.png 158w,\n/static/8fe223c2a9e5762e2369d62e75bc375c/6bdcf/pll.png 315w,\n/static/8fe223c2a9e5762e2369d62e75bc375c/f058b/pll.png 630w,\n/static/8fe223c2a9e5762e2369d62e75bc375c/4c42d/pll.png 896w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\nPLL（Phase Locked Loop），生成时钟的核心部分是 压控振荡器 （Voltage-Controlled Oscillator，VCO）。它是可根据 输入的电压调整输出频率 的振荡器，如上图所示。\r\n它的基本原理是通过 负反馈 形成闭环从而根据输入的基准时钟控制输出时钟。其中鉴相器就相当于一个 比较器 ，它根据基准时钟和输出时钟的差值转换为控制电压，输出到低通滤波器滤除高频杂波，然后输入到VCO，VCO主频过高则降低电压，反之提升电压，使输出时钟跟随给定的基准时钟。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22296b933e5aee38dc1b936cd43a2253/a6ec4/pll-detail.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.354430379746837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyUlEQVR42lWPC0vDQBCE8/9/kSBKLVgrilYxRhNNm5ex9pHEJmkpMZ9zPUFdGJid3Zudc6hy+HyHSijFNx8ctHoJu1qzubSFnRnerG1fr2xv0FZQpDD3cViEMLuCZALRDYSX4B5BLJ7ew+uF5tfid+IjyD09fIZgqN0xTLX/5koLIHNlaKrvLb46e735uW5MIpm9nMvoUXqhZEpYZuAdgz+Ap1OF0d46ORyTYc//+tObL29LfUlG3f5Xb6V5JzI8s4hvYTlT0ge+AQ8rL7qxxuioAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pll详细结构\"\n        title=\"\"\n        src=\"/static/22296b933e5aee38dc1b936cd43a2253/f058b/pll-detail.png\"\n        srcset=\"/static/22296b933e5aee38dc1b936cd43a2253/c26ae/pll-detail.png 158w,\n/static/22296b933e5aee38dc1b936cd43a2253/6bdcf/pll-detail.png 315w,\n/static/22296b933e5aee38dc1b936cd43a2253/f058b/pll-detail.png 630w,\n/static/22296b933e5aee38dc1b936cd43a2253/40601/pll-detail.png 945w,\n/static/22296b933e5aee38dc1b936cd43a2253/78612/pll-detail.png 1260w,\n/static/22296b933e5aee38dc1b936cd43a2253/a6ec4/pll-detail.png 1438w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n上图为PLL的详细结构。</p>\n<p>基准时钟经过分频器后输出频率为 Fref/N ，并输入到鉴相器 。\r\n为了要让鉴相器与反馈频率相同，VCO的输出频率Fvco需要让反馈频率在经过反馈时钟分频器后输出到鉴相器的频率和分频后的基准时钟频率相同，所以 Fvco=M/N·Fref 。\r\nFvco经过输出时钟分频器输出的时钟为 Fi=Fref·M/(N·Ki) ，其中Fi为输出频率，Fref为基准时钟的频率，Ki为输出时钟分频比，N为基准时钟分频比，M为反馈时钟分频比。</p>\n<p>MMCM是一种带有附加逻辑的 PLL，用于进行精细相位调整。因此，MMCM 的相位略优于 PLL，但本质上它们都是 PLL。(The MMCM is a PLL with additional logic to do fine phase adjustments. So, the MMCM has slight phase advantages over the PLL, but at the heart they are both PLLs.MMCM )<a href=\"https://www.reddit.com/r/FPGA/comments/13zcqrk/mmcm_vs_pll/\">参考</a>与<a href=\"https://adaptivesupport.amd.com/s/question/0D52E00006hpaHISAY/dcm-mmcm-and-pll?language=en_US\">更详细的解释</a></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BB%BA%E7%AB%8B%E6%97%B6%E9%97%B4%E5%92%8C%E4%BF%9D%E6%8C%81%E6%97%B6%E9%97%B4-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E5%AE%83%E4%BB%AC\">什么是建立时间和保持时间, 为什么需要考虑它们?</a></p>\n</li>\n<li>\n<p><a href=\"#%E6%97%B6%E9%92%9F%E4%BB%8E%E5%93%AA%E9%87%8C%E6%9D%A5\">时钟从哪里来?</a></p>\n<ul>\n<li>\n<p><a href=\"#%E6%97%B6%E9%92%9F%E6%A0%91\">时钟树</a></p>\n<ul>\n<li><a href=\"#local-clocks\">Local Clocks</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#pll%E5%92%8Cmcmm\">PLL和MCMM</a></p>\n</li>\n</ul>\n</li>\n</ul>","headings":[{"value":"什么是建立时间和保持时间, 为什么需要考虑它们?","depth":2},{"value":"时钟从哪里来?","depth":2},{"value":"时钟树","depth":3},{"value":"Local Clocks","depth":4},{"value":"PLL和MCMM","depth":3}],"frontmatter":{"title":"fpga 时序概念","date":"September 29, 2024","description":"fpga中的时序相关概念"}},"previous":{"fields":{"slug":"/rviz2_h1_robot/"},"frontmatter":{"title":"在rviz2中仿真并操控h1机器人"}},"next":{"fields":{"slug":"/fpga-timing-intra/"},"frontmatter":{"title":"fpga intra-clock时序分析"}}},"pageContext":{"id":"ec88022b-aa0e-57ec-9f78-981270c5ea0d","previousPostId":"6cbd254c-3623-5ce4-820d-261d7a40376f","nextPostId":"f783eb45-74a2-5330-b154-f2c074598df3"}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}