{"componentChunkName":"component---src-templates-blog-post-js","path":"/fpga-timing-intra/","result":{"data":{"site":{"siteMetadata":{"title":"且听龙吟"}},"markdownRemark":{"id":"f783eb45-74a2-5330-b154-f2c074598df3","excerpt":"时序分析工具 report_design_analysis/report timing summary查看时序分析报告,分析logic level, logic delay, net delay(route delay), fanout等信息。Clock Skew，当其绝对值超过 500ps 时，应引起关注。Clock…","html":"<h2 id=\"时序分析工具\" style=\"position:relative;\">时序分析工具<a href=\"#%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7\" aria-label=\"时序分析工具 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>report_design_analysis/report timing summary查看时序分析报告,分析logic level, logic delay, net delay(route delay), fanout等信息。Clock Skew，当其绝对值超过 500ps 时，应引起关注。Clock Uncertainty，当该数值超过 100ps 时，应引起关注。<a href=\"https://www.sunev.cn/embedded/1277.html\">来源</a></p>\n<p>通过report_qor_suggestions生成结果质量 (QoR) 评估报告 (Report Quality of Results (QoR) Assessment)将逻辑层次检查、利用率检查和最常用的时钟拓扑结构检查组合到单一汇总报告中，以便为您提供总体设计评估。此报告可帮助您了解时序收敛问题的严重性。<a href=\"https://docs.amd.com/r/2021.1-%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87/ug949-vivado-design-methodology/%E5%A4%8D%E6%9F%A5%E7%BB%BC%E5%90%88%E6%97%A5%E5%BF%97\">来源</a></p>\n<h2 id=\"什么造成了时序分析失败\" style=\"position:relative;\">什么造成了时序分析失败?<a href=\"#%E4%BB%80%E4%B9%88%E9%80%A0%E6%88%90%E4%BA%86%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90%E5%A4%B1%E8%B4%A5\" aria-label=\"什么造成了时序分析失败 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<h3 id=\"fanout过大\" style=\"position:relative;\">fanout过大<a href=\"#fanout%E8%BF%87%E5%A4%A7\" aria-label=\"fanout过大 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>导致:</p>\n<ol>\n<li>布线拥塞</li>\n<li>驱动能力变弱(下级电路的输入电容增大, transition所需时间增大)</li>\n</ol>\n<h4>诊断方法</h4>\n<p>查看timing summary</p>\n<h4>解决办法</h4>\n<ol>\n<li>寄存器复制</li>\n<li>verilog/xdc中设置max_fanout属性</li>\n<li>设置MAX_FANOUT</li>\n<li>BUFG增加时钟扇出</li>\n</ol>\n<h3 id=\"net-delay过高\" style=\"position:relative;\">net delay过高<a href=\"#net-delay%E8%BF%87%E9%AB%98\" aria-label=\"net delay过高 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>由route过长造成</p>\n<h4>诊断方法</h4>\n<blockquote>\n<p>对于违例路径，若布线延迟超过 50%，说明该延迟是导致时序不能收敛的主要因素，因此可围绕降低布线延迟这一靶心达到时序收敛。</p>\n</blockquote>\n<p><a href=\"https://www.sunev.cn/embedded/1277.html\">来源</a></p>\n<h4>解决办法</h4>\n<h5>set_input_delay/set_output_delay/set_max_delay</h5>\n<ul>\n<li>set_input_delay: 指定输入<strong>数据</strong>引脚相对于其时钟沿的路径延时</li>\n<li>set_output_delay: 指定输出<strong>数据</strong>引脚相对于其时钟沿的路径延时</li>\n<li>set_max_delay:  设置数据路径的最大延迟(-from -to)</li>\n</ul>\n<p>参数:</p>\n<ul>\n<li>max: 定义了输入信号到达端口的最迟时间，用于建立时间分析</li>\n<li>min: 定义了输入信号到达端口的最快时间，用于保持时间分析。(延时太小，FPGA端的保持时间可能不满足)</li>\n</ul>\n<p>调FPGA内部时序的时候，端口的时序可以先放一下，比如set_input_delay, set_put_delay 约束可以先不加，再看一下整个设计的跑的情况，看下有问题的路径，确定如何来优化时序.<a href=\"https://adaptivesupport.amd.com/s/question/0D52E00006hpoB7SAI/fpga%E6%97%B6%E9%92%9F%E8%B7%AF%E5%BE%84%E4%B8%8A%E7%9A%84%E5%BB%B6%E6%97%B6%E8%BF%87%E5%A4%A7%E8%AF%A5%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86?language=en_US\">来源</a></p>\n<p><a href=\"https://blog.csdn.net/FPGADesigner/article/details/82873906\">set_input_delay/set_output_delay</a></p>\n<h3 id=\"logic-delay过高\" style=\"position:relative;\">logic delay过高<a href=\"#logic-delay%E8%BF%87%E9%AB%98\" aria-label=\"logic delay过高 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>由于logic level过高导致data path过长,造成logic delay过高,时序分析失败</p>\n<h4>诊断方法</h4>\n<p>Logic Level Distribution分析延时原因<a href=\"https://blog.csdn.net/zyp626/article/details/139554448\">详解</a></p>\n<p>一个经验法则是，LUT（查找表）加上NET（网络）的延迟大约是0.5ns。如果时钟周期为5ns，则电路中最大的级联数应该是5ns / 0.5ns = 10级\r\n<a href=\"https://blog.csdn.net/yundanfengqing_nuc/article/details/108626269\">来源</a></p>\n<h4>解决办法</h4>\n<h5>流水线化</h5>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 594px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dbabbd8e21ae7f001d5b494c1f828540/5fd3e/before-pipeline.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.354430379746837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAp0lEQVR42k2Pyw6FIBBD/f8f9LEw4MYYBd+iCKlOc7lxEhactNNpht+EEDBNE7qu4/Pe475vsrZt0fc9/8ITG4aB7DuZwG3bcJ4nhWVZoq5rsuM4yIqigNYay7KQWWuR5znZvu//Y2QXF4roui4Kq6pC0zQ0O+dgjGGIUgrrupKJR0KU0q/XceE4jmyWpVNjjJjnmUslTQK+TAxSN12TdP6tHENkddE/HLExem7LQocAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"before-pipeline\"\n        title=\"\"\n        src=\"/static/dbabbd8e21ae7f001d5b494c1f828540/5fd3e/before-pipeline.png\"\n        srcset=\"/static/dbabbd8e21ae7f001d5b494c1f828540/c26ae/before-pipeline.png 158w,\n/static/dbabbd8e21ae7f001d5b494c1f828540/6bdcf/before-pipeline.png 315w,\n/static/dbabbd8e21ae7f001d5b494c1f828540/5fd3e/before-pipeline.png 594w\"\n        sizes=\"(max-width: 594px) 100vw, 594px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n这是原本只有组合逻辑电路的设计，组合逻辑总延迟为total_delay = delay1 + delay2 + delay3</p>\n<p>并且我们要求total_delay &#x3C; clock_period</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d9921830c03ea80b874fd115daf78c38/55843/after-pipeline.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.088607594936708%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3QUD/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFxAAAwEAAAAAAAAAAAAAAAAAABARQf/aAAgBAQABPyHVD//aAAwDAQACAAMAAAAQgA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEAAgMAAAAAAAAAAAAAAAABABFRgeH/2gAIAQEAAT8QSQK3mArs/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"after-pipeline\"\n        title=\"\"\n        src=\"/static/d9921830c03ea80b874fd115daf78c38/828fb/after-pipeline.jpg\"\n        srcset=\"/static/d9921830c03ea80b874fd115daf78c38/ff44c/after-pipeline.jpg 158w,\n/static/d9921830c03ea80b874fd115daf78c38/a6688/after-pipeline.jpg 315w,\n/static/d9921830c03ea80b874fd115daf78c38/828fb/after-pipeline.jpg 630w,\n/static/d9921830c03ea80b874fd115daf78c38/55843/after-pipeline.jpg 928w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>这是流水线化后的设计，中间添加了寄存器，由此组合逻辑被分成了三个阶段，每个阶段的延迟为delay1, delay2, delay3</p>\n<p>我们只需要max{delay1, delay2, delay3} &#x3C; clock_period即可</p>\n<p>虽然信号传递时长增加了,但是每个输出数据之间间隔依旧是只有一个时钟周期,并且允许更高的时钟频率</p>\n<blockquote>\n<p>建议数据输出到管脚前用寄存器打一拍，这样IO上的时序比较容易满足。这条路径如果在输出前用寄存器打一拍时序就很容易满足了</p>\n</blockquote>\n<p><a href=\"https://adaptivesupport.amd.com/s/question/0D52E00006hpoB7SAI/fpga%E6%97%B6%E9%92%9F%E8%B7%AF%E5%BE%84%E4%B8%8A%E7%9A%84%E5%BB%B6%E6%97%B6%E8%BF%87%E5%A4%A7%E8%AF%A5%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86?language=en_US\">来源</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 288px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8a66ecffab114e1bf977ce70da8b3cd3/c14c5/2-level-pipeline-before.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd0pAX//xAAYEAACAwAAAAAAAAAAAAAAAAAAARARIf/aAAgBAQABBQIvRz//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhEEH/2gAIAQEAAT8hdTalsVDfKgFO/wD/2gAMAwEAAgADAAAAEHQP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFRYf/aAAgBAQABPxA2l1eew0HVdiRavhjmm3HCE//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"\"\n        src=\"/static/8a66ecffab114e1bf977ce70da8b3cd3/c14c5/2-level-pipeline-before.jpg\"\n        srcset=\"/static/8a66ecffab114e1bf977ce70da8b3cd3/ff44c/2-level-pipeline-before.jpg 158w,\n/static/8a66ecffab114e1bf977ce70da8b3cd3/c14c5/2-level-pipeline-before.jpg 288w\"\n        sizes=\"(max-width: 288px) 100vw, 288px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n将上图通过流水线化优化后得到下图\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 609px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/694e2346eb352c20fec90d20d9ba2ae6/51891/2-level-pipeline.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.75949367088608%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwACBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB7pKWT2av/8QAGBABAAMBAAAAAAAAAAAAAAAAAAECETH/2gAIAQEAAQUCbGpWV5//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAWEQADAAAAAAAAAAAAAAAAAAABEDH/2gAIAQIBAT8BMX//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQITFB/9oACAEBAAE/IX2+QEapg2QQDWP/2gAMAwEAAgADAAAAEGwv/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARIf/aAAgBAwEBPxALyP/EABcRAQEBAQAAAAAAAAAAAAAAAAERAEH/2gAIAQIBAT8QaUcw0u//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMVFBYf/aAAgBAQABPxCrVWsVMAQ0vkqHsCr+ktFZdvdSwBVrs//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"二阶流水线\"\n        title=\"\"\n        src=\"/static/694e2346eb352c20fec90d20d9ba2ae6/51891/2-level-pipeline.jpg\"\n        srcset=\"/static/694e2346eb352c20fec90d20d9ba2ae6/ff44c/2-level-pipeline.jpg 158w,\n/static/694e2346eb352c20fec90d20d9ba2ae6/a6688/2-level-pipeline.jpg 315w,\n/static/694e2346eb352c20fec90d20d9ba2ae6/51891/2-level-pipeline.jpg 609w\"\n        sizes=\"(max-width: 609px) 100vw, 609px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>上图为二阶流水线</p>\n<ul>\n<li>K阶流水线（“k-pipeline”）是一种无循环电路，其在从输入到输出的每个路径上具有恰好k个寄存器。因此，组合电路是0阶流水线。</li>\n<li>k阶流水线的延迟是所有寄存器通用时钟的k倍。</li>\n<li>k阶流水线的吞吐量是时钟的频率。</li>\n</ul>\n<p><a href=\"https://www.ebaina.com/articles/140000012360\">参考A</a></p>\n<p><a href=\"https://www.ebaina.com/articles/140000012361\">参考B</a></p>\n<h5>手动retiming优化</h5>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 438px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5000dcb94e9ef903f8c40e425771913f/854eb/retiming.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.21518987341772%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHasJIX/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARMTL/2gAIAQEAAQUCenAqf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABUQAQEAAAAAAAAAAAAAAAAAABAR/9oACAEBAAY/Aq//xAAZEAADAAMAAAAAAAAAAAAAAAAAAREhMWH/2gAIAQEAAT8hSNzowQklbP/aAAwDAQACAAMAAAAQh8//xAAWEQEBAQAAAAAAAAAAAAAAAAAAATH/2gAIAQMBAT8QjH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAXEAADAQAAAAAAAAAAAAAAAAABESEA/9oACAEBAAE/EH5Qgy6bFivWNnf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"retiming\"\n        title=\"\"\n        src=\"/static/5000dcb94e9ef903f8c40e425771913f/854eb/retiming.jpg\"\n        srcset=\"/static/5000dcb94e9ef903f8c40e425771913f/ff44c/retiming.jpg 158w,\n/static/5000dcb94e9ef903f8c40e425771913f/a6688/retiming.jpg 315w,\n/static/5000dcb94e9ef903f8c40e425771913f/854eb/retiming.jpg 438w\"\n        sizes=\"(max-width: 438px) 100vw, 438px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n上图将一组寄存器从组合逻辑的左边移动到另一边，改善了右边时序的压力，但也会增加左边逻辑的压力</p>\n<p>如果一方的压力较大，一方的压力较小，就可以通过这种切割关键路径的方式改善关键路径时序(关键时序路径就是延迟最大的路径)。</p>\n<p><a href=\"https://www.ebaina.com/articles/140000012361\">参考</a></p>\n<h5>自动retiming优化</h5>\n<ul>\n<li>\n<p>RETIMING_FORWARD: 寄存器沿着逻辑链向前移动，即向驱动顺序元件的方向移动(register forward through logic closer to the driven sequential elements)<a href=\"https://docs.amd.com/r/en-US/ug901-vivado-synthesis/RETIMING_FORWARD\">RETIMING_FORWARD官方文档</a></p>\n</li>\n<li>\n<p>RETIMING_BACKWARD: 寄存器沿着逻辑链向后移动，即向顺序驱动元件的方向移动(register backward through logic closer to the sequential driving elements)<a href=\"https://docs.amd.com/r/en-US/ug901-vivado-synthesis/RETIMING_BACKWARD\">RETIMING_BACKWARD官方文档</a></p>\n</li>\n</ul>\n<h2 id=\"仍有参考价值的资料\" style=\"position:relative;\">仍有参考价值的资料<a href=\"#%E4%BB%8D%E6%9C%89%E5%8F%82%E8%80%83%E4%BB%B7%E5%80%BC%E7%9A%84%E8%B5%84%E6%96%99\" aria-label=\"仍有参考价值的资料 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><a href=\"https://blog.csdn.net/zyp626/category_11915436.html\">FPGA所知所见所解(专栏)</a></li>\n<li><a href=\"https://www.ebaina.com/blog/article/200000090893\">FPGA博客by李锐博恩</a></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a81756d6c0f71b0b990d747a3530ee33/0d292/optimization-overview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABBUlEQVR42n1R207DMAzd//8Q8IL4DuAB8TLY1iZpmqvtHJxMHWhCtWSplePjczlgpxo3xDWCUsVq/Wg3GcQlIIeEWipEBK21287hPyBhAfXHha//JIg+QjJjOVsFtSgpg4nB+qbJHqDOuNBYkEzjequ6WPVbgddpgbtYLLNDCnGwzCmBlcQAlESgWMFbBwLoerEDlKhMVHKOaTD2k4M5zbBnA6+gq/EoKr9tgOblE8eHV3w9veP4+IbL8weQ5Ma2tyhDUobdy/l7glPZXpl2G4bHOvuVzF1jGwGMVlb9WrvztOaK4jOMAtZYxrwH0mf7HmqRerel22XNpwmLBhFcGAn/BbivH3/qJAY3vjz6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"优化概述\"\n        title=\"\"\n        src=\"/static/a81756d6c0f71b0b990d747a3530ee33/f058b/optimization-overview.png\"\n        srcset=\"/static/a81756d6c0f71b0b990d747a3530ee33/c26ae/optimization-overview.png 158w,\n/static/a81756d6c0f71b0b990d747a3530ee33/6bdcf/optimization-overview.png 315w,\n/static/a81756d6c0f71b0b990d747a3530ee33/f058b/optimization-overview.png 630w,\n/static/a81756d6c0f71b0b990d747a3530ee33/40601/optimization-overview.png 945w,\n/static/a81756d6c0f71b0b990d747a3530ee33/78612/optimization-overview.png 1260w,\n/static/a81756d6c0f71b0b990d747a3530ee33/0d292/optimization-overview.png 1620w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7\">时序分析工具</a></p>\n</li>\n<li>\n<p><a href=\"#%E4%BB%80%E4%B9%88%E9%80%A0%E6%88%90%E4%BA%86%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90%E5%A4%B1%E8%B4%A5\">什么造成了时序分析失败?</a></p>\n<ul>\n<li>\n<p><a href=\"#fanout%E8%BF%87%E5%A4%A7\">fanout过大</a></p>\n<ul>\n<li><a href=\"#%E8%AF%8A%E6%96%AD%E6%96%B9%E6%B3%95\">诊断方法</a></li>\n<li><a href=\"#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95\">解决办法</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#net-delay%E8%BF%87%E9%AB%98\">net delay过高</a></p>\n<ul>\n<li>\n<p><a href=\"#%E8%AF%8A%E6%96%AD%E6%96%B9%E6%B3%95-1\">诊断方法</a></p>\n</li>\n<li>\n<p><a href=\"#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95-1\">解决办法</a></p>\n<ul>\n<li><a href=\"#set_input_delayset_output_delayset_max_delay\">set_input_delay/set_output_delay/set_max_delay</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#logic-delay%E8%BF%87%E9%AB%98\">logic delay过高</a></p>\n<ul>\n<li>\n<p><a href=\"#%E8%AF%8A%E6%96%AD%E6%96%B9%E6%B3%95-2\">诊断方法</a></p>\n</li>\n<li>\n<p><a href=\"#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95-2\">解决办法</a></p>\n<ul>\n<li><a href=\"#%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%8C%96\">流水线化</a></li>\n<li><a href=\"#%E6%89%8B%E5%8A%A8retiming%E4%BC%98%E5%8C%96\">手动retiming优化</a></li>\n<li><a href=\"#%E8%87%AA%E5%8A%A8retiming%E4%BC%98%E5%8C%96\">自动retiming优化</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E4%BB%8D%E6%9C%89%E5%8F%82%E8%80%83%E4%BB%B7%E5%80%BC%E7%9A%84%E8%B5%84%E6%96%99\">仍有参考价值的资料</a></p>\n</li>\n</ul>","headings":[{"value":"时序分析工具","depth":2},{"value":"什么造成了时序分析失败?","depth":2},{"value":"fanout过大","depth":3},{"value":"诊断方法","depth":4},{"value":"解决办法","depth":4},{"value":"net delay过高","depth":3},{"value":"诊断方法","depth":4},{"value":"解决办法","depth":4},{"value":"set_input_delay/set_output_delay/set_max_delay","depth":5},{"value":"logic delay过高","depth":3},{"value":"诊断方法","depth":4},{"value":"解决办法","depth":4},{"value":"流水线化","depth":5},{"value":"手动retiming优化","depth":5},{"value":"自动retiming优化","depth":5},{"value":"仍有参考价值的资料","depth":2}],"frontmatter":{"title":"fpga intra-clock时序分析","date":"October 03, 2024","description":"fpga时序约束不满足的原因及解决办法"}},"previous":{"fields":{"slug":"/fpga-timing-concepts/"},"frontmatter":{"title":"fpga 时序概念"}},"next":{"fields":{"slug":"/3d-reconstruction-basic/"},"frontmatter":{"title":"三维重建:从基础到3dgs"}}},"pageContext":{"id":"f783eb45-74a2-5330-b154-f2c074598df3","previousPostId":"ec88022b-aa0e-57ec-9f78-981270c5ea0d","nextPostId":"5f84b76e-b10f-5416-9215-2063475f930e"}},"staticQueryHashes":["230163734","2841359383"],"slicesMap":{}}